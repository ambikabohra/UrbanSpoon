<!DOCTYPE html>
<html>
    <header>
        <title></title>
        <link rel="stylesheet" type="text/css" href="/static/login.css">
        <link rel="stylesheet" type="text/css" href="/static/home.css"> 
        <script src="js/login.js"></script
    </header>
    <body style="background-image:url(/static/images/background.jpeg)">

        <ul class="topnav">
            <li><a class="active" href="/">Home</a></li>
        </ul>
            
        <form method="post" onsubmit="event.preventDefault(); onSubmitHandler();">
                <div class="box">
                    <h1>Login</h1>
            
                    <input type="email" name="email" id="email" required
                        class="email" />
            
                    <input type="password" name="password" id="password" required
                        class="email" />
            
                    <button type="submit" class="btn" >Login</button>
                </div> 

            </form>
            
            
    </body>
    
    <script>
            
        function onSubmitHandler(event) {

            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
    
            const data = {
                "username": email,
                "password": password
            };
            fetch("/login", {
                method : "POST",
                body: JSON.stringify(data),
                headers:{
                    'Content-Type': 'application/json'
                }
            })
            .then(r => r.json())
            .then(response => {
                if (response.message === "Success") {
                    window.location = "/restaurants";

                }
                else {
                    window.alert(response.message);
                }
                console.log('Success:', JSON.stringify(response));
            }).catch(error => {
                console.error('Error:', error)
            });
            return false;
        }
    </script>

</html>
